<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>State holders and UI state | Türkçe Android Dokümantasyonu</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="State holders and UI state" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Android Dokümantasyonu Türkçe Çeviri Projesi" /> <meta property="og:description" content="Android Dokümantasyonu Türkçe Çeviri Projesi" /> <link rel="canonical" href="http://localhost:4000/docs/app-architecture/guide-to-app-architecture/ui-layer/state-holders-and-ui-state.html" /> <meta property="og:url" content="http://localhost:4000/docs/app-architecture/guide-to-app-architecture/ui-layer/state-holders-and-ui-state.html" /> <meta property="og:site_name" content="Türkçe Android Dokümantasyonu" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="State holders and UI state" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Android Dokümantasyonu Türkçe Çeviri Projesi","headline":"State holders and UI state","url":"http://localhost:4000/docs/app-architecture/guide-to-app-architecture/ui-layer/state-holders-and-ui-state.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Türkçe Android Dokümantasyonu </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Ana Sayfa</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in App basics category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-basics" class="nav-list-link">App basics</a><ul class="nav-list"><li class="nav-list-item "><a href="/docs/app-basics/build-your-first-app.html" class="nav-list-link">Build Your First App</a></li><li class="nav-list-item "><a href="/docs/app-basics/app-fundamentals.html" class="nav-list-link">App fundamentals</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App resources category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-basics/app-resources/app-resources.html" class="nav-list-link">App resources</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/about-app-resources.html" class="nav-list-link">About app resources</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/handle-configuration-changes.html" class="nav-list-link">Handle configuration changes</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/localization/localization.html" class="nav-list-link">Localization</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/complex-xml-resources.html" class="nav-list-link">Complex XML resources</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/resource-types/resource-types.html" class="nav-list-link">Resource types</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App manifest file category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-basics/app-manifest-file/app-manifest-file.html" class="nav-list-link">App manifest file</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/about-app-manifests.html" class="nav-list-link">About app manifests</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/action.html" class="nav-list-link">action</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/activity.html" class="nav-list-link">activity</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/activity-alias.html" class="nav-list-link">action</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/application.html" class="nav-list-link">application</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/category.html" class="nav-list-link">category</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/compatible-screens.html" class="nav-list-link">action</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/data.html" class="nav-list-link">data</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/grant-uri-permission.html" class="nav-list-link">grant-uri-permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/instrumentation.html" class="nav-list-link">instrumentation</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/intent-filter.html" class="nav-list-link">intent-filter</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/layout.html" class="nav-list-link">layout</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/manifest.html" class="nav-list-link">manifest</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/meta-data.html" class="nav-list-link">meta-data</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/path-permission.html" class="nav-list-link">path-permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/permission.html" class="nav-list-link">permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/permission-group.html" class="nav-list-link">permission-group</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/permission-tree.html" class="nav-list-link">permission tree</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/property.html" class="nav-list-link">property</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/receiver.html" class="nav-list-link">receiver</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/service.html" class="nav-list-link">service</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/supports-gl-texture.html" class="nav-list-link">supports-gl-texture</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/supports-screens.html" class="nav-list-link">supports-screens</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-configuration.html" class="nav-list-link">uses-configuration</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-feature.html" class="nav-list-link">manifest</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-library.html" class="nav-list-link">uses-library</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-native-library.html" class="nav-list-link">uses-native-library</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-permission.html" class="nav-list-link">uses-permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-permission-sdk-23.html" class="nav-list-link">uses-permission-sdk-23</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-sdk.html" class="nav-list-link">uses-sdk</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in App architecture category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture" class="nav-list-link">App architecture</a><ul class="nav-list"><li class="nav-list-item "><a href="/docs/app-architecture/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Guide to app architecture category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/guide-to-app-architecture/guide-to-app-architecture.html" class="nav-list-link">Guide to app architecture</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/about-app-architecture.html" class="nav-list-link">About app architecture</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/ui-layer/ui-layer.html" class="nav-list-link">Ui layer</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/domain-layer.html" class="nav-list-link">Domain layer</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/data-layer/data-layer.html" class="nav-list-link">Data layer</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/architecture-recommendatios.html" class="nav-list-link">Architecture recommendations</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/learning-pathway.html" class="nav-list-link">Learning pathway</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Modularization category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/modularization/modularization.html" class="nav-list-link">Modularization</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/modularization/about-modularization.html" class="nav-list-link">About modularization</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/modularization/common-patterns.html" class="nav-list-link">Common patterns</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/modularization/recipes.html" class="nav-list-link">Recipes</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Architecture components category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/architecture-components/architecture-components.html" class="nav-list-link">Architecture components</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/architecture-components/ui-layer-libraries/ui-layer-libraries.html" class="nav-list-link">UI layer libraries</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/architecture-components/data-layer-libraries/data-layer-libraries.html" class="nav-list-link">Data layer libraries</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App entry points category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/app-entry-points/app-entry-points.html" class="nav-list-link">App entry points</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/app-entry-points/activities/activities.html" class="nav-list-link">Activities</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-entry-points/app-shortcuts/app-shortcuts.html" class="nav-list-link">App shortcuts</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App navigation category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/app-navigation/app-navigation.html" class="nav-list-link">App navigation</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/principles-of-navigation.html" class="nav-list-link">Principles of navigation</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/design-for-different-form-factors.html" class="nav-list-link">Design for different form factors</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/handle-configuration-changes.html" class="nav-list-link">Handle configuration changes</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/navigation-component/navigation-component.html" class="nav-list-link">Navigation component</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/fragments/fragments.html" class="nav-list-link">Fragments</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/app-links/app-links.html" class="nav-list-link">App links</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/create-swipe-views-with-tabs-using-viewpager.html" class="nav-list-link">Create swipe views with tabs using ViewPager</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/create-swipe-views-with-tabs-using-viewpager2.html" class="nav-list-link">Create swipe views with tabs using ViewPager2</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/add-support-for-back-navigation/add-support-for-back-navigation.html" class="nav-list-link">Add support for back navigation</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Dependency Injection category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/dependency-injection/dependency-injection.html" class="nav-list-link">Dependency Injection</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/about-dependency-injection.html" class="nav-list-link">About dependency injection</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/manual-dependency-injection.html" class="nav-list-link">Manual dependency injection</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/dependency-injetion-with-hilt.html" class="nav-list-link">Dependency injection with Hilt</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/hilt-in-multi-module-apps.html" class="nav-list-link">Hilt in multi-module apps</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/use-hilt-with-other-jetpack-libraries.html" class="nav-list-link">Use Hilt with other Jetpack libraries</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/hilt-testing-guide.html" class="nav-list-link">Hilt testing guide</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/hilt-and-dagger-annotations-cheat-sheet.html" class="nav-list-link">Hilt and Dagger annotations cheat sheet</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/dagger/dagger.html" class="nav-list-link">Dagger</a> </li></ul></li><li class="nav-list-item "><a href="/docs/app-architecture/app-startup.html" class="nav-list-link">App startup</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Core topics category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/core-topics" class="nav-list-link">Core topics</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Best practices category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/best-practices" class="nav-list-link">Best practices</a><ul class="nav-list"></ul></li></ul> </nav> <footer class="site-footer"> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Ara" aria-label="Ara" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="">Guide to app architecture</a></li> <li class="breadcrumb-nav-list-item"><a href="">Ui layer</a></li> <li class="breadcrumb-nav-list-item"><span>State holders and UI state</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="state-holders-and-ui-state"> <a href="#state-holders-and-ui-state" class="anchor-heading" aria-labelledby="state-holders-and-ui-state"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> State holders and UI state </h2> <p><a href="ui-layer">UI layer</a> kılavuzu, UI katmanı için UI State oluşturma ve yönetme aracı olarak tek yönlü veri akışını (UDF) tartışır. <img src="/assets/images/state-holders-and-ui-state-img1.png" alt="Undirectiona data flow" /></p> <p>Ayrıca, UDF yönetimini state holder adı verilen özel bir sınıfa devretmenin faydalarını da vurgular. Bir state holderi ViewModel veya düz bir sınıf aracılığıyla uygulayabilirsiniz. Bu dokümantasyon, state holderleri ve UI katmanında oynadıkları role daha yakından bakıyor. Bu belgenin sonunda, UI katmanında application state’inin nasıl yönetileceğini anlamalısınız; bu, UI state production pipelinedir. Aşağıdakileri anlayabilmeli ve bilmelisiniz:</p> <ul> <li>UI katmanında bulunan UI state türlerini anlayın.</li> <li>UI katmanındaki bu UI stateleri üzerinde çalışan logic türlerini anlayın.</li> <li>ViewModel veya basit bir sınıf gibi bir state holderin uygun implementasyonunu nasıl seçeceğinizi öğrenin.</li> </ul> <p><a href="https://youtu.be/pCX9wvu-Bq0">State holders and state production in the UI Layer</a></p> <h3 id="elements-of-the-ui-state-production-pipeline"> <a href="#elements-of-the-ui-state-production-pipeline" class="anchor-heading" aria-labelledby="elements-of-the-ui-state-production-pipeline"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Elements of the UI state production pipeline </h3> <p>UI state ve onu üreten logic, UI katmanını tanımlar.</p> <h3 id="ui-state"> <a href="#ui-state" class="anchor-heading" aria-labelledby="ui-state"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> UI state </h3> <p><a href="about-the-ui-layer.md#define-ui-state">UI state</a>, UI’yi tanımlayan propertydir. İki tür UI state vardır:</p> <ul> <li>Screen UI State, ekranda görüntülemeniz gereken şeydir. Örneğin, bir NewsUiState sınıfı, UI oluşturmak için gereken haber makalelerini ve diğer bilgileri içerebilir. Bu state, uygulama verilerini içerdiğinden genellikle hiyerarşinin diğer katmanlarıyla bağlantılıdır.</li> <li>UI element state, UI elementlerinin nasıl oluşturulduğunu etkileyen, onlara özgü propertyleri ifade eder. Bir UI elementi gösterilebilir veya gizlenebilir ve belirli bir yazı tipine, yazı tipi boyutuna veya yazı tipi rengine sahip olabilir. Androide, View, doğası gereği stateful olduğu için bu state’i kendisi yönetir ve state’i değiştirmek veya sorgulamak için methodlar sunar. Bunun bir örneği, text için TextView sınıfının get ve set methodlaridir. Jetpack Compose’da state composable olanın dışındadır ve hatta onu composable olanın hemen yakınından çağıran composable fonksiyona veya bir state holderine hoist edebilirsiniz. Bunun bir örneği, composable Scaffold için ScaffoldState’tir.</li> </ul> <h3 id="logic"> <a href="#logic" class="anchor-heading" aria-labelledby="logic"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Logic </h3> <p>Uygulama verileri ve kullanıcı eventleri, UI state’inin zaman içinde değişmesine neden olduğundan, UI state statik bir property değildir. Logic, UI state’inin hangi bölümlerinin değiştiği, neden değiştiği ve ne zaman değişmesi gerektiği dahil olmak üzere değişikliğin özelliklerini belirler. <img src="/assets/images/state-holders-and-ui-state-img2.png" alt="Logic as the producer of UI state" /></p> <p>Logic, business logic veya UI logic olabilir:</p> <ul> <li>Business logic, uygulama verileri için ürün gereksinimlerinin implemente edilmesidir. Örneğin, kullanıcı butona dokunduğunda bir haber okuyucu uygulamasında bir makaleye yer işareti koyma. Bir yer imini bir dosyaya veya veritabanına kaydetme logic’i genellikle domain veya data katmanlarına yerleştirilir. State holder genellikle bu logic’i, ortaya çıkardıkları metodları çağırarak bu katmanlara devreder.</li> <li>UI logic, UI state’inin ekranda nasıl görüntüleneceği ile ilgilidir. Örneğin, kullanıcı bir kategori seçtiğinde doğru arama çubuğu hint elde etmek, bir listede belirli bir öğeye kaydırma yapmak veya kullanıcı bir butona tıkladığında belirli bir ekrana navigate etme logic’i.</li> </ul> <h3 id="android-lifecycle-and-the-types-of-ui-state-and-logic"> <a href="#android-lifecycle-and-the-types-of-ui-state-and-logic" class="anchor-heading" aria-labelledby="android-lifecycle-and-the-types-of-ui-state-and-logic"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Android lifecycle and the types of UI state and logic </h3> <p>UI katmanının iki bölümü vardır: UI lifecycle’a biri bağımlı, diğeri bağımsız. Bu ayrım, her fragmentin kullanabileceği veri kaynaklarını belirler ve bu nedenle farklı türde UI state ve logic gerektirir.</p> <ul> <li> <p>UI yaşam döngüsünden bağımsız(UI lifecycle independent): UI katmanının bu kısmı, uygulamanın veri üreten katmanlarıyla (data veya domain katmanları) ilgilenir ve business logic tarafından tanımlanır. UI’deki lifecycle, configuration changes ve activity oluşturma, UI state production pipeline in etkin olup olmadığını etkileyebilir, ancak üretilen verilerin geçerliliğini etkilemez.</p> </li> <li> <p>UI yaşam döngüsüne bağlı(UI lifecycle dependent): UI katmanının bu kısmı, UI logici ile ilgilenir ve lifecycle veya configuration changeden doğrudan etkilenir. Bu değişiklikler, içinde okunan veri kaynaklarının geçerliliğini doğrudan etkiler ve sonuç olarak state ancak lifecycle aktif olduğunda değişebilir. Buna örnek olarak runtime izinleri ve localized stringler gibi yapılandırmaya bağlı kaynakların alınması dahildir.</p> </li> </ul> <p>Yukarıdakiler aşağıdaki tablo ile özetlenebilir:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Ui Lifecycle independent</th> <th>Ui Lifecycle dependent</th> </tr> </thead> <tbody> <tr> <td>Business logic</td> <td>UI logic</td> </tr> <tr> <td>Screen UI state</td> <td> </td> </tr> </tbody> </table></div> <h3 id="the-ui-state-production-pipeline"> <a href="#the-ui-state-production-pipeline" class="anchor-heading" aria-labelledby="the-ui-state-production-pipeline"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The UI state production pipeline </h3> <p>UI state production pipeline, UI state oluşturmak için atilan adımları ifade eder. Bu adımlar, daha önce tanımlanan logic türlerinin uygulanmasını içerir ve tamamen UI gereksinimlerine bağlıdır. Bazı UI’ler, pipeline’in hem UI Lifecycle independent hem de UI Lifecycle dependent bölümlerinden yararlanabilir veya hiçbirinden yararlanamaz.</p> <p>Yani, UI katman pipeline’in aşağıdaki permütasyonları geçerlidir:</p> <ul> <li>UI’in kendisi tarafından üretilen ve yönetilen UI state. Örneğin, basit, yeniden kullanılabilir bir temel sayaç:</li> </ul> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">Counter</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// The UI state is managed by the UI itself</span>
    <span class="kd">var</span> <span class="py">count</span> <span class="k">by</span> <span class="nf">remember</span> <span class="p">{</span> <span class="nf">mutableStateOf</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">}</span>
    <span class="nc">Row</span> <span class="p">{</span>
        <span class="nc">Button</span><span class="p">(</span><span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span> <span class="p">++</span><span class="n">count</span> <span class="p">})</span> <span class="p">{</span>
            <span class="nc">Text</span><span class="p">(</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Increment"</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="nc">Button</span><span class="p">(</span><span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span> <span class="p">--</span><span class="n">count</span> <span class="p">})</span> <span class="p">{</span>
            <span class="nc">Text</span><span class="p">(</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Decrement"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <ul> <li>UI logic → UI. Örneğin, kullanıcının bir listenin en üstüne atlamasına olanak tanıyan bir butonu göstermek veya gizlemek.</li> </ul> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">ContactsList</span><span class="p">(</span><span class="n">contacts</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">Contact</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">listState</span> <span class="p">=</span> <span class="nf">rememberLazyListState</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">isAtTopOfList</span> <span class="k">by</span> <span class="nf">remember</span> <span class="p">{</span>
        <span class="nf">derivedStateOf</span> <span class="p">{</span>
            <span class="n">listState</span><span class="p">.</span><span class="n">firstVisibleItemIndex</span> <span class="p">&lt;</span> <span class="mi">3</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Create the LazyColumn with the lazyListState</span>
    <span class="o">..</span><span class="p">.</span>

    <span class="c1">// Show or hide the button (UI logic) based on the list scroll position</span>
    <span class="nc">AnimatedVisibility</span><span class="p">(</span><span class="n">visible</span> <span class="p">=</span> <span class="p">!</span><span class="n">isAtTopOfList</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">ScrollToTopButton</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <ul> <li>Business logic → UI. Geçerli kullanıcının fotoğrafını ekranda gösteren bir UI elementi.</li> </ul> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">UserProfileScreen</span><span class="p">(</span><span class="n">viewModel</span><span class="p">:</span> <span class="nc">UserProfileViewModel</span> <span class="p">=</span> <span class="nf">hiltViewModel</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// Read screen UI state from the business logic state holder</span>
    <span class="kd">val</span> <span class="py">uiState</span> <span class="k">by</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="nf">collectAsStateWithLifecycle</span><span class="p">()</span>

    <span class="c1">// Call on the UserAvatar Composable to display the photo</span>
    <span class="nc">UserAvatar</span><span class="p">(</span><span class="n">picture</span> <span class="p">=</span> <span class="n">uiState</span><span class="p">.</span><span class="n">profilePicture</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <ul> <li>Business logic → UI logic → UI.Belirli bir UI state için ekranda doğru bilgileri görüntülemek üzere kayan bir UI element.</li> </ul> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">ContactsList</span><span class="p">(</span><span class="n">viewModel</span><span class="p">:</span> <span class="nc">ContactsViewModel</span> <span class="p">=</span> <span class="nf">hiltViewModel</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// Read screen UI state from the business logic state holder</span>
    <span class="kd">val</span> <span class="py">uiState</span> <span class="k">by</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="nf">collectAsStateWithLifecycle</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">contacts</span> <span class="p">=</span> <span class="n">uiState</span><span class="p">.</span><span class="n">contacts</span>
    <span class="kd">val</span> <span class="py">deepLinkedContact</span> <span class="p">=</span> <span class="n">uiState</span><span class="p">.</span><span class="n">deepLinkedContact</span>

    <span class="kd">val</span> <span class="py">listState</span> <span class="p">=</span> <span class="nf">rememberLazyListState</span><span class="p">()</span>

    <span class="c1">// Create the LazyColumn with the lazyListState</span>
    <span class="o">..</span><span class="p">.</span>

    <span class="c1">// Perform UI logic that depends on information from business logic</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">deepLinkedContact</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">contacts</span><span class="p">.</span><span class="nf">isNotEmpty</span><span class="p">())</span> <span class="p">{</span>
        <span class="nc">LaunchedEffect</span><span class="p">(</span><span class="n">listState</span><span class="p">,</span> <span class="n">deepLinkedContact</span><span class="p">,</span> <span class="n">contacts</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">deepLinkedContactIndex</span> <span class="p">=</span> <span class="n">contacts</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="n">deepLinkedContact</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">deepLinkedContactIndex</span> <span class="p">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Scroll to deep linked item</span>
                <span class="n">listState</span><span class="p">.</span><span class="nf">animateScrollToItem</span><span class="p">(</span><span class="n">deepLinkedContactIndex</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>UI state production pipeline her iki tür mantığın da uygulandığı durumda, business logic her zaman UI logicten önce uygulanmalıdır. UI logicinden sonra busines logici uygulamaya çalışmak, business logicin UI logice bağlı olduğu anlamına gelir. Aşağıdaki bölümler, farklı logic türlerine ve state holderlerine derinlemesine bir bakışla bunun neden bir sorun olduğunu ele almaktadır. <img src="/assets/images/state-holders-and-ui-state-img3.png" alt="Application of logic in the UI layer" /></p> <h3 id="state-holders-and-their-responsibilities"> <a href="#state-holders-and-their-responsibilities" class="anchor-heading" aria-labelledby="state-holders-and-their-responsibilities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> State holders and their responsibilities </h3> <p>State holderin sorumluluğu, uygulamanın okuyabilmesi için state’i saklamaktır. Logice ihtiyaç duyulan durumlarda aracılık yaparak gerekli logici barındıran veri kaynaklarına erişim sağlar. Bu şekilde, state holder logici uygun veri kaynağına devreder.</p> <p>Bu, aşağıdaki faydaları sağlar:</p> <ul> <li>Basit UI’lar: UIsadece state’ini bağlar.</li> <li>Sürdürülebilirlik: State holderda tanımlanan logic, UI’in kendisi değiştirilmeden yinelenebilir.</li> <li>Test Edilebilirlik: UI ve state production logici bağımsız olarak test edilebilir.</li> <li>Okunabilirlik: Kodu okuyanlar, UI presentation kodu ile UI state production kodu arasındaki farkları açıkça görebilir.</li> </ul> <p>Boyutu veya kapsamı ne olursa olsun, her UI elementinin karşılık gelen state holderi ile 1:1 ilişkisi vardır. Ayrıca, bir state holderin, bir UI state değişikliği ile sonuçlanabilecek herhangi bir kullanıcı eylemini kabul edebilmesi ve işleyebilmesi ve ardından gelen state değişikliğini üretebilmesi gerekir.</p> <p><mark style="background-color: lightblue">Not: State holderler kesinlikle gerekli değildir. Basit UI’kar, logiclerini presentation kodlarıyla inline olarak barındırabilir.</mark></p> <h3 id="types-of-state-holders"> <a href="#types-of-state-holders" class="anchor-heading" aria-labelledby="types-of-state-holders"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Types of state holders </h3> <p>UI state’i ve logic’i tiplerini benzer şekilde, UI katmanında, UI yaşam döngüsüyle olan ilişkilerine göre tanımlanan iki tür state holder vardır:</p> <ul> <li>The business logic state holder.</li> <li>The UI logic state holder.</li> </ul> <p>Aşağıdaki bölümlerde, business logic state holderinden başlayarak state holderlerin türlerine daha yakından bakılmaktadır.</p> <p><mark style="background-color: lightblue">Not: Bir UI logic state holderi, data veya domain katmanlarından gelen bilgilere bağlıysa, bu bilgileri ona bir business logic state holderinden iletmelisiniz. Bunun nedeni, business logic state holderinin, UI yaşam döngüsünden bağımsız olduğu için UI logici state holderinden daha uzun ömürlü olmasıdır.</mark></p> <h3 id="business-logic-and-its-state-holder"> <a href="#business-logic-and-its-state-holder" class="anchor-heading" aria-labelledby="business-logic-and-its-state-holder"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Business logic and its state holder </h3> <p>Business logic state holderlari, kullanıcı eventlerini handle eder ve verileri data veya domain katmanlarından ekran UI state’ine dönüştürür. Android yaşam döngüsü ve uygulama configuration changes göz önünde bulundurulduğunda optimum kullanıcı deneyimi sağlamak için business logic kullanan state holderlerini aşağıdaki özelliklere sahip olması gerekir:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Property</th> <th>Detail</th> </tr> </thead> <tbody> <tr> <td>Produces UI State(UI State uretmek)</td> <td>Business logic state holderlar, UI için UI state’i oluşturmaktan sorumludur. Bu UI state’i, genellikle kullanıcı eventlerinin handle edilmesiyle ve domain ve data katmanlarından verilerin okunmasının sonucudur.</td> </tr> <tr> <td>Retained through activity recreation(activitynin yeniden olusturulmasina karsi korumak)</td> <td>Business logic state holderlar, Activity’nin yeniden oluşturulması karsisinda state ve state processing pipelinelerini koruyarak sorunsuz bir kullanıcı deneyimi sağlamaya yardımcı olur. State holderin korunmadigi ve yeniden yaratıldığı durumlarda (genellikle işlem ölümünden sonra), state holderin tutarlı bir kullanıcı deneyimi sağlamak için son state’i kolayca yeniden oluşturabilmesi gerekir.</td> </tr> <tr> <td>Possess long lived state(uzun omurlu state tutmak)</td> <td>Business logic state holderlari genellikle navigasyon destinationlari için state’i yönetmek amacila kullanılır. Sonuç olarak, genellikle navigasyon graphden kaldırılana kadar statelerini navigasyon değişikliklerinde korurlar.</td> </tr> <tr> <td>Is unique to its UI and is not reusable(Kullanıcı arayüzüne özgüdür ve yeniden kullanılamaz)</td> <td>Business logic state holderleri tipik olarak belirli bir uygulama fonksiyonaltesi icin üretilir, örneğin bir TaskEditViewModel veya bir TaskListViewModel için state üretir ve bu nedenle yalnızca o uygulama fonksiyonalitesi için geçerlidir. Aynı state holder, farklı form faktörlerinde bu uygulama fonksiyonalitelerini destekleyebilir. Örneğin, uygulamanın mobil, TV ve tablet sürümleri aynı business logic state holderini yeniden kullanabilir.</td> </tr> </tbody> </table></div> <p><mark style="background-color: lightblue">Not: Business logic state holderlar; ViewModel instancelari yukarıda belirtilen özelliklerin birçoğunu, özellikle de Activity yeniden oluşturma sırasında hayatta kaldigi icin, tipik olarak bir ViewModel instance ile implement edilirler.</mark></p> <p>Örneğin, <a href="https://github.com/android/nowinandroid">“Now in Android”</a> uygulamasında yazar navigation hedefini göz önünde bulundurun:</p> <p><img src="/assets/images/now-in-android-img1.png" alt="Now in Android" /> Business logic state holder olarak hareket eden <a href="https://github.com/android/nowinandroid/blob/main/feature-author/src/main/java/com/google/samples/apps/nowinandroid/feature/author/AuthorViewModel.kt">AuthorViewModel</a>, bu durumda UI state’ini üretir:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HiltViewModel</span>
<span class="kd">class</span> <span class="nc">AuthorViewModel</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">(</span>
    <span class="n">savedStateHandle</span><span class="p">:</span> <span class="nc">SavedStateHandle</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">authorsRepository</span><span class="p">:</span> <span class="nc">AuthorsRepository</span><span class="p">,</span>
    <span class="n">newsRepository</span><span class="p">:</span> <span class="nc">NewsRepository</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">val</span> <span class="py">uiState</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">AuthorScreenUiState</span><span class="p">&gt;</span> <span class="p">=</span> <span class="err">…</span>

    <span class="c1">// Business logic</span>
    <span class="k">fun</span> <span class="nf">followAuthor</span><span class="p">(</span><span class="n">followed</span><span class="p">:</span> <span class="nc">Boolean</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">…</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>AuthorViewModel’in daha önce belirtilen business logic state holder özelliklere sahip olduğuna dikkat edin:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Property</th> <th>Detail</th> </tr> </thead> <tbody> <tr> <td>Produces AuthorScreenUiState</td> <td>The AuthorViewModel reads data from the AuthorsRepository and NewsRepository and uses that data to produce AuthorScreenUiState. It also applies business logic when the user wants to follow or unfollow an Author by delegating to the AuthorsRepository.</td> </tr> <tr> <td>Has access to the data layer</td> <td>An instance of AuthorsRepository and NewsRepository are passed to it in its constructor, allowing it to implement the business logic of following an Author.</td> </tr> <tr> <td>Survives Activity recreation</td> <td>Because it is implemented with a ViewModel, it will be retained across quick Activity recreation. In the case of process death, the SavedStateHandle object can be read from to provide the minimum amount of information required to restore the UI state from the data layer.</td> </tr> <tr> <td>Possesses long lived state</td> <td>The ViewModel is scoped to the navigation graph, therefore unless the author destination is removed from the nav graph, the UI state in the uiState StateFlow remains in memory. The use of the StateFlow also adds the benefit of making the application of the business logic that produces the state lazy because state is only produced if there is a collector of the UI state.</td> </tr> <tr> <td>Is unique to its UI</td> <td>The AuthorViewModel is only applicable to the author navigation destination and cannot be reused anywhere else. If there is any business logic that is reused across navigation destinations, that business logic must be encapsulated in a data- or domain-layer-scoped component.</td> </tr> </tbody> </table></div> <p><mark style="background-color: lightblue">Not: ViewModel'i yalnızca destination düzeyinde UI ile kullanmalısınız. Bunları, UI’in arama çubukları veya chip grupları gibi yeniden kullanılabilir parçalarında kullanmamalısınız. Bu durumlarda düz sınıflar daha uygundur.</mark></p> <p><mark style="background-color: red">Uyarı: ViewModel instancelarini diğer composable fonksiyonlara argüman olarak vermeyin. Bunu yapmak, composable fonksiyonu ViewModel türüyle birleştirerek daha az yeniden kullanılabilir ve test edilmesini ve önizlemesini zorlaştırır. Ayrıca, ViewModel instancesini yöneten net bir tek doğruluk kaynağı (SSOT) olmayacaktır. ViewModel'i devre dışı bırakmak, birden çok composable öğenin ViewModel fonksiyonlarini çağırmasına ve state’i değiştirmesine izin vererek hataların debugini zorlaştırır. Bunun yerine, UDF best practicelerini izleyin ve yalnızca gerekli state’i iletin. Aynı şekilde, yayılan eventleri ViewModel'in composable SSOT'sine ulaşana kadar iletin. Eventi handle eden ve karşılık gelen ViewModel methodlarini çağıran SSOT budur. </mark></p> <h3 id="the-viewmodel-as-a-business-logic-state-holder"> <a href="#the-viewmodel-as-a-business-logic-state-holder" class="anchor-heading" aria-labelledby="the-viewmodel-as-a-business-logic-state-holder"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The ViewModel as a business logic state holder </h3> <p>ViewModels’in Android geliştirmedeki faydaları, onları business logice erişim sağlamak ve uygulama verilerini ekranda presentation için hazırlamak için uygun hale getirir. Bu faydalar aşağıdakileri içerir:</p> <ul> <li> <p>ViewModels tarafından tetiklenen işlemler configuration changelerden kurtulur</p> </li> <li>Navigasyon ile Entegrasyon saglar; <ul> <li>Navigasyon, ekran backstackde iken ViewModels’i önbelleğe(cacheler) alır. Bu, destinationunuza döndüğünüzde önceden yüklenmiş verilerinizin anında kullanılabilir olması açısından önemlidir. Bu, composable ekranın yaşam döngüsünü observe eden bir state holder ile yapılması daha zor bir şeydir.</li> <li>ViewModel, hedef backstackden çıkarıldığında da temizlenir ve state’inizin otomatik olarak temizlenmesini sağlar. Bu, yeni bir ekrana gitme, bir configuration change nedeniyle veya başka nedenler gibi birçok nedenden dolayı meydana gelebilecek composable imhayı dinlemekten farklıdır.</li> </ul> </li> <li>Hilt gibi diğer Jetpack library ile entegrasyon saglar.</li> </ul> <p><mark style="background-color: lightblue">Not: ViewModel avantajları kullanım durumunuz için geçerli değilse veya işleri farklı bir şekilde yapıyorsanız, ViewModel'in sorumluluklarını düz state holder sınıflara taşıyabilirsiniz.</mark></p> <h3 id="ui-logic-and-its-state-holder"> <a href="#ui-logic-and-its-state-holder" class="anchor-heading" aria-labelledby="ui-logic-and-its-state-holder"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> UI logic and its state holder </h3> <p>UI logic, UI’nin kendisinin sağladığı veriler üzerinde çalışan logictir. Bu, UI elementlerinin state’inde veya permissions API’si veya Resources gibi UI data kaynaklarında olabilir. UI logicini kullanan state holderlar tipik olarak aşağıdaki özelliklere sahiptir:</p> <ul> <li>UI state’ini üretir ve UI elementlerinin state’ini yönetir.</li> <li>Activity’i yeniden olusturma durumunda hayatta kalmaz; UI logicinde barındırılan state holderlar, genellikle UI’nin kendisinden gelen veri kaynaklarına bağımlıdır ve bu bilgileri yapılandırma değişiklikleri boyunca tutmaya çalışmak, genellikle bir bellek sızıntısına neden olur. State holderlar, yapılandırma değişikliklerinde devam etmek için verilere ihtiyaç duyarsa, hayatta kalan Aktivite yeniden olusturulmasina daha uygun başka bir componente yetki vermeleri gerekir. Örneğin, Jetpack Compose’da, remembered fonksiyonlarla oluşturulan Composable UI element stateleri, Activity yeniden olusturulmasi boyunca state’i korumak için genellikle rememberSaveable’a yetki verir. Bu tür fonksiyonlarin örnekleri arasında, rememberScaffoldState() ve rememberLazyListState() bulunur.</li> <li>UI scopeindaki veri kaynaklarına referansları vardır: UI logic state holder, UI ile aynı yaşam döngüsüne sahip olduğundan, yaşam döngüsü API’leri ve Resources gibi veri kaynaklarına güvenle başvurulabilir ve okunabilir.</li> <li>Birden çok UI’de yeniden kullanılabilir: Aynı UI logic state holderinin farklı instancelari, uygulamanın farklı bölümlerinde yeniden kullanılabilir. Örneğin, bir chip grubu için kullanıcı input eventlerini yönetmek için bir state holder, filter chipleri için bir arama sayfasında ve ayrıca bir e-posta alıcıları için “to” fieldi için kullanılabilir.</li> </ul> <p>UI logic state holder, tipik olarak düz bir sınıfla uygulanır. Bunun nedeni, UI logic state holderinin oluşturulmasından UI’nin kendisinin sorumlu olması ve UI logic state holderinin, UI’nin kendisi ile aynı yaşam döngüsüne sahip olmasıdır. Örneğin Jetpack Compose’da state holder, Composition’un bir parçasıdır ve Composition’un yaşam döngüsünü takip eder.</p> <p><mark style="background-color: lightblue">Not: Düz sınıf state holderleri, UI logici, UI'den taşınacak kadar karmaşık olduğunda kullanılır. Aksi takdirde, UI logici, UI'de inline olarak uygulanabilir.</mark> Now in Android örneğindeki aşağıdaki örnekte gösterilebilir: <img src="/assets/images/now-in-android-img2.png" alt="The now in android sample app" /> Now in Android örneği, cihazın ekran boyutuna bağlı olarak navigtion için bir bottom appbar veya bir navigation raili gösterir. Daha küçük ekranlar alttaki appbari ve daha büyük ekranlar navigation rail kullanır. NiaApp composable fonksiyonunda kullanılan uygun navigation UI elementine karar verme logici, business logice bağlı olmadığından, <a href="https://github.com/android/nowinandroid/blob/main/app/src/main/java/com/google/samples/apps/nowinandroid/ui/NiaAppState.kt">NiaAppState</a> adlı düz bir sınıf state holder tarafından yönetilebilir:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Stable</span>
<span class="kd">class</span> <span class="nc">NiaAppState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">navController</span><span class="p">:</span> <span class="nc">NavHostController</span><span class="p">,</span>
    <span class="kd">val</span> <span class="py">windowSizeClass</span><span class="p">:</span> <span class="nc">WindowSizeClass</span>
<span class="p">)</span> <span class="p">{</span>

    <span class="c1">// UI logic</span>
    <span class="kd">val</span> <span class="py">shouldShowBottomBar</span><span class="p">:</span> <span class="nc">Boolean</span>
        <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">windowSizeClass</span><span class="p">.</span><span class="n">widthSizeClass</span> <span class="p">==</span> <span class="nc">WindowWidthSizeClass</span><span class="p">.</span><span class="nc">Compact</span> <span class="p">||</span>
            <span class="n">windowSizeClass</span><span class="p">.</span><span class="n">heightSizeClass</span> <span class="p">==</span> <span class="nc">WindowHeightSizeClass</span><span class="p">.</span><span class="nc">Compact</span>

    <span class="c1">// UI logic</span>
    <span class="kd">val</span> <span class="py">shouldShowNavRail</span><span class="p">:</span> <span class="nc">Boolean</span>
        <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="p">!</span><span class="n">shouldShowBottomBar</span>

   <span class="c1">// UI State</span>
    <span class="kd">val</span> <span class="py">currentDestination</span><span class="p">:</span> <span class="nc">NavDestination</span><span class="p">?</span>
        <span class="nd">@Composable</span> <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">navController</span>
            <span class="p">.</span><span class="nf">currentBackStackEntryAsState</span><span class="p">().</span><span class="n">value</span><span class="o">?.</span><span class="n">destination</span>

    <span class="c1">// UI logic</span>
    <span class="k">fun</span> <span class="nf">navigate</span><span class="p">(</span><span class="n">destination</span><span class="p">:</span> <span class="nc">NiaNavigationDestination</span><span class="p">,</span> <span class="n">route</span><span class="p">:</span> <span class="nc">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

     <span class="cm">/* ... */</span>
<span class="p">}</span>
</code></pre></div></div> <p>Yukarıdaki örnekte, NiaAppState ile ilgili aşağıdaki ayrıntılar dikkat çekicidir:</p> <ul> <li>Activity yeniden olustugunda hayatta kalamaz: NiaAppState, Compose adlandırma kurallarına uygun bir Composable fonksiyonu ile <a href="https://github.com/android/nowinandroid/blob/main/app/src/main/java/com/google/samples/apps/nowinandroid/ui/NiaAppState.kt#L46">rememberNiaAppState</a> oluşturularak Compositionda hatırlanır. Activity yeniden oluşturulduktan sonra, önceki instancelar kaybolur ve yeniden oluşturulan Activity’nin yeni yapılandırmasına uygun olarak tüm bağımlılıkları iletilmiş yeni bir instance oluşturulur. Bu bağımlılıklar yeni olabilir veya önceki yapılandırmadan geri yüklenebilir. Örneğin, rememberNavController(), niaAppState constructorunda kullanılır ve Activity yeniden olusturulmasi boyunca state’i korumak için rememberSaveable’a yetki verir.</li> <li>UI kapsamlı veri kaynaklarına referansları vardır: NavigationController, Resources ve diğer benzer yaşam döngüsü kapsamındaki tiplere yapılan refereanslar, aynı yaşam döngüsü kapsamını paylaştıklarından NiaAppState’te güvenle tutulabilir.</li> </ul> <p><mark style="background-color: lightblue">Not: Düz state holder sınıfları, arama çubukları veya chip grupları gibi yeniden kullanılabilir kullanıcı arabirimi parçaları için önerilir. Bu durumda ViewModels'i kullanmamalısınız çünkü bunlar en iyi navigation destination için state’i yönetmek ve business logice erişim için kullanılır.</mark></p> <h3 id="choose-between-a-viewmodel-and-plain-class-for-a-state-holder"> <a href="#choose-between-a-viewmodel-and-plain-class-for-a-state-holder" class="anchor-heading" aria-labelledby="choose-between-a-viewmodel-and-plain-class-for-a-state-holder"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Choose between a ViewModel and plain class for a state holder </h3> <p>Yukarıdaki bölümlerden, bir ViewModel ve bir düz sınıf state holder arasında seçim yapmak, UI state’ine uygulanan logice ve logicin üzerinde çalıştığı veri kaynaklarına iner.</p> <p><mark style="background-color: lightblue">Not: Çoğu uygulama, aksi takdirde düz sınıf state holderine yerleştirilebilecek olan UI logicini UI’in kendisinde inline olarak gerçekleştirmeyi seçer. Bu, basit durumlar için iyidir, ancak diğer durumlar için, logici düz bir sınıf state holderine çekerek okunabilirliği artırabilirsiniz </mark> Özetle, aşağıdaki diyagram, UI State’i production pipelinedaki state holderlerinin pozisyonunu gösterir: <img src="/assets/images/state-holders-and-ui-state-img4.png" alt="State holders in the UI State production pipeline. Arrows mean data flow." /> Sonuç olarak, tüketildiği yere en yakın state holderlerini kullanarak UI state’i üretmelisiniz. Daha az resmi olarak, uygun ownershipligi surdururken state’i mümkün olduğunca düşük tutmalısınız. Business logice erişmeniz gerekiyorsa ve UI state’inin, Activity yeniden olusturulmasi genelinde bile bir ekrana gidilebildiği sürece devam etmesi gerekiyorsa, bir <a href="/docs/app-architecture/architecture-components/ui-layer-libraries/lifecycle-aware-components/ViewModel/about-viewmodel">ViewModel</a>, business logic state holder implement etmeniz için harika bir seçimdir. Daha kısa ömürlü UI state ve UI logic için, yaşam döngüsü yalnızca UI’ye bağlı olan düz bir sınıf yeterli olmalıdır.</p> <h3 id="state-holders-are-compoundable"> <a href="#state-holders-are-compoundable" class="anchor-heading" aria-labelledby="state-holders-are-compoundable"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> State holders are compoundable </h3> <p>Bağımlılıklar eşit veya daha kısa bir ömre sahip olduğu sürece state holderlar diğer state holderlara bağımlı olabilir. Bunun örnekleri şunlardır:</p> <ul> <li>bir UI logic state holder başka bir UI logic state holder’a bağlı olabilir.</li> <li>bir screen level state holder, bir UI logic state holder’a bağlı olabilir.</li> </ul> <p>Aşağıdaki kod parçacığı, Compose’un <a href="https://developer.android.com/reference/kotlin/androidx/compose/material/DrawerState">DrawerState</a>‘inin başka bir dahili state holder olan <a href="https://developer.android.com/reference/kotlin/androidx/compose/material/SwipeableState">SwipeableState</a>‘e nasıl bağlı olduğunu ve bir uygulamanın UI logic state holder’ının DrawerState’e nasıl bağlı olabileceğini göstermektedir:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Stable</span>
<span class="kd">class</span> <span class="nc">DrawerState</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">internal</span> <span class="kd">val</span> <span class="py">swipeableState</span> <span class="p">=</span> <span class="nc">SwipeableState</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="nd">@Stable</span>
<span class="kd">class</span> <span class="nc">MyAppState</span><span class="p">(</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">drawerState</span><span class="p">:</span> <span class="nc">DrawerState</span><span class="p">,</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">navController</span><span class="p">:</span> <span class="nc">NavHostController</span>
<span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">rememberMyAppState</span><span class="p">(</span>
  <span class="n">drawerState</span><span class="p">:</span> <span class="nc">DrawerState</span> <span class="p">=</span> <span class="nf">rememberDrawerState</span><span class="p">(</span><span class="nc">DrawerValue</span><span class="p">.</span><span class="nc">Closed</span><span class="p">),</span>
  <span class="n">navController</span><span class="p">:</span> <span class="nc">NavHostController</span> <span class="p">=</span> <span class="nf">rememberNavController</span><span class="p">()</span>
<span class="p">):</span> <span class="nc">MyAppState</span> <span class="p">=</span> <span class="nf">remember</span><span class="p">(</span><span class="n">drawerState</span><span class="p">,</span> <span class="n">navController</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">MyAppState</span><span class="p">(</span><span class="n">drawerState</span><span class="p">,</span> <span class="n">navController</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <p><mark style="background-color:red">Dikkat: Screen level state holderların bir ekranın veya ekranın bir kısmının business logic karmaşıklığını yönettiği göz önüne alındığında, bir screen level state holderın başka bir screen level state holdera bağlı olması mantıklı olmayacaktır. Bu senaryodaysanız, ekranlarınızı ve state holder'larınızı yeniden gözden geçirin ve ihtiyacınız olanın bu olduğundan emin olun. </mark></p> <p>Bir state holder’dan daha uzun ömürlü bir bağımlılık örneği, bir screen level state holder’a bağlı olan bir UI logic state holder olabilir. Bu, daha kısa ömürlü state holder’ın yeniden kullanılabilirliğini azaltır ve gerçekte ihtiyaç duyduğundan daha fazla logic ve state’e erişmesini sağlar.</p> <p>Daha kısa ömürlü state holder’ın daha yüksek scope’lu bir state holder’dan belirli bilgilere ihtiyacı varsa, state holder instance’ını geçmek yerine yalnızca ihtiyaç duyduğu bilgileri parametre olarak geçirin. Örneğin, aşağıdaki kod parçasında, UI logic state holder sınıfı, ViewModel instance’ının tamamını bir bağımlılık olarak geçirmek yerine ViewModel’den parametre olarak sadece ihtiyaç duyduğu bilgileri alır.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyScreenViewModel</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="py">uiState</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">MyScreenUiState</span><span class="p">&gt;</span> <span class="p">=</span> <span class="cm">/* ... */</span>
  <span class="k">fun</span> <span class="nf">doSomething</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="k">fun</span> <span class="nf">doAnotherThing</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="nd">@Stable</span>
<span class="kd">class</span> <span class="nc">MyScreenState</span><span class="p">(</span>
  <span class="c1">// DO NOT pass a ViewModel instance to a plain state holder class</span>
  <span class="c1">// private val viewModel: MyScreenViewModel,</span>

  <span class="c1">// Instead, pass only what it needs as a dependency</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">someState</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">SomeState</span><span class="p">&gt;,</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">doSomething</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span>

  <span class="c1">// Other UI-scoped types</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">scaffoldState</span><span class="p">:</span> <span class="nc">ScaffoldState</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="cm">/* ... */</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">rememberMyScreenState</span><span class="p">(</span>
  <span class="n">someState</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">SomeState</span><span class="p">&gt;,</span>
  <span class="n">doSomething</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span>
  <span class="n">scaffoldState</span><span class="p">:</span> <span class="nc">ScaffoldState</span> <span class="p">=</span> <span class="nf">rememberScaffoldState</span><span class="p">()</span>
<span class="p">):</span> <span class="nc">MyScreenState</span> <span class="p">=</span> <span class="nf">remember</span><span class="p">(</span><span class="n">someState</span><span class="p">,</span> <span class="n">doSomething</span><span class="p">,</span> <span class="n">scaffoldState</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">MyScreenState</span><span class="p">(</span><span class="n">someState</span><span class="p">,</span> <span class="n">doSomething</span><span class="p">,</span> <span class="n">scaffoldState</span><span class="p">)</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">MyScreen</span><span class="p">(</span>
  <span class="n">modifier</span><span class="p">:</span> <span class="nc">Modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">,</span>
  <span class="n">viewModel</span><span class="p">:</span> <span class="nc">MyScreenViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">(),</span>
  <span class="n">state</span><span class="p">:</span> <span class="nc">MyScreenState</span> <span class="p">=</span> <span class="nf">rememberMyScreenState</span><span class="p">(</span>
    <span class="n">someState</span> <span class="p">=</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">toSomeState</span><span class="p">()</span> <span class="p">},</span>
    <span class="n">doSomething</span> <span class="p">=</span> <span class="n">viewModel</span><span class="o">::</span><span class="n">doSomething</span>
  <span class="p">),</span>
  <span class="c1">// ...</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="cm">/* ... */</span>
<span class="p">}</span>
</code></pre></div></div> <p>Aşağıdaki diyagram, UI ile önceki kod parçacığının farklı state holder’ları arasındaki bağımlılıkları temsil etmektedir: <img src="/assets/images/state-holders-and-ui-state-img5.png" alt="Ui depending on the different state holders. Arrows mean dependencies." /></p> <h3 id="samples"> <a href="#samples" class="anchor-heading" aria-labelledby="samples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a href="https://developer.android.com/topic/architecture/ui-layer/stateholders#samples">Samples</a> </h3> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
