<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Ui events | Türkçe Android Dokümantasyonu</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Ui events" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Android Dokümantasyonu Türkçe Çeviri Projesi" /> <meta property="og:description" content="Android Dokümantasyonu Türkçe Çeviri Projesi" /> <link rel="canonical" href="http://localhost:4000/docs/app-architecture/guide-to-app-architecture/ui-layer/ui-events.html" /> <meta property="og:url" content="http://localhost:4000/docs/app-architecture/guide-to-app-architecture/ui-layer/ui-events.html" /> <meta property="og:site_name" content="Türkçe Android Dokümantasyonu" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Ui events" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Android Dokümantasyonu Türkçe Çeviri Projesi","headline":"Ui events","url":"http://localhost:4000/docs/app-architecture/guide-to-app-architecture/ui-layer/ui-events.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Türkçe Android Dokümantasyonu </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Ana Sayfa</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in App basics category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-basics" class="nav-list-link">App basics</a><ul class="nav-list"><li class="nav-list-item "><a href="/docs/app-basics/build-your-first-app.html" class="nav-list-link">Build Your First App</a></li><li class="nav-list-item "><a href="/docs/app-basics/app-fundamentals.html" class="nav-list-link">App fundamentals</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App resources category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-basics/app-resources/app-resources.html" class="nav-list-link">App resources</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/about-app-resources.html" class="nav-list-link">About app resources</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/handle-configuration-changes.html" class="nav-list-link">Handle configuration changes</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/localization/localization.html" class="nav-list-link">Localization</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/complex-xml-resources.html" class="nav-list-link">Complex XML resources</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-resources/resource-types/resource-types.html" class="nav-list-link">Resource types</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App manifest file category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-basics/app-manifest-file/app-manifest-file.html" class="nav-list-link">App manifest file</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/about-app-manifests.html" class="nav-list-link">About app manifests</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/action.html" class="nav-list-link">action</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/activity.html" class="nav-list-link">activity</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/activity-alias.html" class="nav-list-link">action</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/application.html" class="nav-list-link">application</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/category.html" class="nav-list-link">category</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/compatible-screens.html" class="nav-list-link">action</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/data.html" class="nav-list-link">data</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/grant-uri-permission.html" class="nav-list-link">grant-uri-permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/instrumentation.html" class="nav-list-link">instrumentation</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/intent-filter.html" class="nav-list-link">intent-filter</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/layout.html" class="nav-list-link">layout</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/manifest.html" class="nav-list-link">manifest</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/meta-data.html" class="nav-list-link">meta-data</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/path-permission.html" class="nav-list-link">path-permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/permission.html" class="nav-list-link">permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/permission-group.html" class="nav-list-link">permission-group</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/permission-tree.html" class="nav-list-link">permission tree</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/property.html" class="nav-list-link">property</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/receiver.html" class="nav-list-link">receiver</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/service.html" class="nav-list-link">service</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/supports-gl-texture.html" class="nav-list-link">supports-gl-texture</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/supports-screens.html" class="nav-list-link">supports-screens</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-configuration.html" class="nav-list-link">uses-configuration</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-feature.html" class="nav-list-link">manifest</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-library.html" class="nav-list-link">uses-library</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-native-library.html" class="nav-list-link">uses-native-library</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-permission.html" class="nav-list-link">uses-permission</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-permission-sdk-23.html" class="nav-list-link">uses-permission-sdk-23</a> </li><li class="nav-list-item "> <a href="/docs/app-basics/app-manifest-file/uses-sdk.html" class="nav-list-link">uses-sdk</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in App architecture category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture" class="nav-list-link">App architecture</a><ul class="nav-list"><li class="nav-list-item "><a href="/docs/app-architecture/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Guide to app architecture category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/guide-to-app-architecture/guide-to-app-architecture.html" class="nav-list-link">Guide to app architecture</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/about-app-architecture.html" class="nav-list-link">About app architecture</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/ui-layer/ui-layer.html" class="nav-list-link">Ui layer</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/domain-layer.html" class="nav-list-link">Domain layer</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/data-layer/data-layer.html" class="nav-list-link">Data layer</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/architecture-recommendatios.html" class="nav-list-link">Architecture recommendations</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/guide-to-app-architecture/learning-pathway.html" class="nav-list-link">Learning pathway</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Modularization category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/modularization/modularization.html" class="nav-list-link">Modularization</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/modularization/about-modularization.html" class="nav-list-link">About modularization</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/modularization/common-patterns.html" class="nav-list-link">Common patterns</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/modularization/recipes.html" class="nav-list-link">Recipes</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Architecture components category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/architecture-components/architecture-components.html" class="nav-list-link">Architecture components</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/architecture-components/ui-layer-libraries/ui-layer-libraries.html" class="nav-list-link">UI layer libraries</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/architecture-components/data-layer-libraries/data-layer-libraries.html" class="nav-list-link">Data layer libraries</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App entry points category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/app-entry-points/app-entry-points.html" class="nav-list-link">App entry points</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/app-entry-points/activities/activities.html" class="nav-list-link">Activities</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-entry-points/app-shortcuts/app-shortcuts.html" class="nav-list-link">App shortcuts</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in App navigation category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/app-navigation/app-navigation.html" class="nav-list-link">App navigation</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/principles-of-navigation.html" class="nav-list-link">Principles of navigation</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/design-for-different-form-factors.html" class="nav-list-link">Design for different form factors</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/handle-configuration-changes.html" class="nav-list-link">Handle configuration changes</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/navigation-component/navigation-component.html" class="nav-list-link">Navigation component</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/fragments/fragments.html" class="nav-list-link">Fragments</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/app-links/app-links.html" class="nav-list-link">App links</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/create-swipe-views-with-tabs-using-viewpager.html" class="nav-list-link">Create swipe views with tabs using ViewPager</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/create-swipe-views-with-tabs-using-viewpager2.html" class="nav-list-link">Create swipe views with tabs using ViewPager2</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/app-navigation/add-support-for-back-navigation/add-support-for-back-navigation.html" class="nav-list-link">Add support for back navigation</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Dependency Injection category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/app-architecture/dependency-injection/dependency-injection.html" class="nav-list-link">Dependency Injection</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/about-dependency-injection.html" class="nav-list-link">About dependency injection</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/manual-dependency-injection.html" class="nav-list-link">Manual dependency injection</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/dependency-injetion-with-hilt.html" class="nav-list-link">Dependency injection with Hilt</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/hilt-in-multi-module-apps.html" class="nav-list-link">Hilt in multi-module apps</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/use-hilt-with-other-jetpack-libraries.html" class="nav-list-link">Use Hilt with other Jetpack libraries</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/hilt-testing-guide.html" class="nav-list-link">Hilt testing guide</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/hilt-and-dagger-annotations-cheat-sheet.html" class="nav-list-link">Hilt and Dagger annotations cheat sheet</a> </li><li class="nav-list-item "> <a href="/docs/app-architecture/dependency-injection/dagger/dagger.html" class="nav-list-link">Dagger</a> </li></ul></li><li class="nav-list-item "><a href="/docs/app-architecture/app-startup.html" class="nav-list-link">App startup</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Core topics category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/core-topics" class="nav-list-link">Core topics</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Best practices category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/docs/best-practices" class="nav-list-link">Best practices</a><ul class="nav-list"></ul></li></ul> </nav> <footer class="site-footer"> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Ara" aria-label="Ara" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="">Guide to app architecture</a></li> <li class="breadcrumb-nav-list-item"><a href="">Ui layer</a></li> <li class="breadcrumb-nav-list-item"><span>Ui events</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="ui-events"> <a href="#ui-events" class="anchor-heading" aria-labelledby="ui-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> UI events </h2> <p>UI eventleri, UI layerda UI veya ViewModel tarafından işlenmesi gereken actionlardir. En yaygın event türü, kullanıcı eventleridir. Kullanıcı, uygulamayla etkileşim kurarak, örneğin ekrana dokunarak veya hareketler(gesture) oluşturarak kullanıcı eventleri oluşturur. UI daha sonra onClick() listenerlar gibi callbackleri kullanarak bu olayları tüketir( consume eder).</p> <p><mark style="background-color: lightblue"> Anahtar terimler: </mark></p> <ul> <li>Kullanıcı Arabirimi(UI): Kullanıcı arabirimini yöneten View tabanlı kod veya Compose kodu.</li> <li>UI eventleri(Kullanici arabirimi olaylari): UI layerda handle edilmesi gereken gereken actionlar.</li> <li>Kullanıcı eventlari(User events): Kullanıcının uygulama ile etkileşim kurarken oluşturduğu eventler.</li> </ul> <p>ViewModel normalde belirli bir kullanıcı eventinin business logicini handle etmekten sorumludur; örneğin, kullanıcının bazı verileri yenilemek için bir butona tıklaması. Genellikle ViewModel, UI’in çağırabileceği methodlari göstererek bunu halleder. Kullanıcı eventlari, UI’in doğrudan handle edebilecegi UI behavior logicine de sahip olabilir; örneğin, farklı bir ekrana gitme veya bir Snackbar gösterme.</p> <p>Farklı mobil platformlarda veya form factorlerinde aynı uygulama için business logic aynı kalırken, UI behaviour logic’i bu durumlar arasında farklılık gösterebilen bir implementasyon detayıdır. <a href="ui-layer">UI layer sayfası</a>, bu logic türlerini aşağıdaki gibi tanımlar:</p> <ul> <li> <p>İş mantığı(business logic), state değişiklikleriyle ne yapılacağını ifade eder; örneğin, ödeme yapmak veya kullanıcı tercihlerini saklamak. Domain ve data layerlar genellikle bu logic’i handle eder. Bu kılavuz boyunca, <a href="/docs/app-architecture/architecture-components/ui-layer-libraries/lifecycle-aware-components/ViewModel/about-viewmodel">Architecture Components ViewModel sınıfı</a>, business logic’i handle eden sınıflar için düşünülmüş bir çözüm olarak kullanılır.</p> </li> <li> <p>UI davranış mantığı veya UI mantığı(UI behavior logic veya UI logic), state değişikliklerinin nasıl görüntüleneceğini ifade eder; örneğin, navigation logic’i veya kullanıcıya mesajların nasıl gösterileceği. UI bu logic’i handle eder.</p> </li> </ul> <p><mark style="background-color: lightblue"> Not: Bu sayfada sunulan öneriler ve best practiceler, geniş bir uygulama yelpazesine uygulanarak ölçeklenebilir, kaliteyi ve sağlamlığı artırabilir ve test edilmesini kolaylaştırabilir. Ancak, bunları kılavuz olarak ele almalı ve gereksinimlerinize göre uyarlamalısınız. </mark></p> <p><a href="https://youtu.be/lwGtp0Yr0PE">Architecture: Handling UI events-MAD Skills</a></p> <h3 id="ui-event-decision-tree"> <a href="#ui-event-decision-tree" class="anchor-heading" aria-labelledby="ui-event-decision-tree"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> UI event decision tree </h3> <p>Aşağıdaki diyagram, belirli bir event kullanım senaryosunu(use case) ele almak için en iyi yaklaşımı bulmaya yönelik bir karar ağacını(decision tree) göstermektedir. Bu kılavuzun geri kalanında bu yaklaşımlar ayrıntılı olarak açıklanmaktadır. <img src="/assets/images/decision-tree-handling-events.png" alt="Eventleri handle etmek için karar ağacı(event decision tree)." /></p> <h3 id="handle-user-events"> <a href="#handle-user-events" class="anchor-heading" aria-labelledby="handle-user-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handle user events </h3> <p>Bu eventler, bir UI elementinin state’inin (örneğin, expandable bir itemin state’i) değiştirilmesiyle ilgiliyse, UI, kullanıcı eventlerini doğrudan handle edebilir. Event, ekrandaki verilerin yenilenmesi gibi business logicin yürütülmesini gerektiriyorsa ViewModel tarafından işlenmelidir. Aşağıdaki örnek, UI elementini genişletmek (UI logic) ve ekrandaki verileri yenilemek (business logic) için farklı butonlarin nasıl kullanıldığını gösterir:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Views</span>
<span class="kd">class</span> <span class="nc">LatestNewsActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">ActivityLatestNewsBinding</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">LatestNewsViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span><span class="p">()</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="cm">/* ... */</span>

        <span class="c1">// The expand details event is processed by the UI that</span>
        <span class="c1">// modifies a View's internal state.</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">expandButton</span><span class="p">.</span><span class="nf">setOnClickListener</span> <span class="p">{</span>
            <span class="n">binding</span><span class="p">.</span><span class="n">expandedSection</span><span class="p">.</span><span class="n">visibility</span> <span class="p">=</span> <span class="nc">View</span><span class="p">.</span><span class="nc">VISIBLE</span>
        <span class="p">}</span>

        <span class="c1">// The refresh event is processed by the ViewModel that is in charge</span>
        <span class="c1">// of the business logic.</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">refreshButton</span><span class="p">.</span><span class="nf">setOnClickListener</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="p">.</span><span class="nf">refreshNews</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="c1">//compose</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">LatestNewsScreen</span><span class="p">(</span><span class="n">viewModel</span><span class="p">:</span> <span class="nc">LatestNewsViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">())</span> <span class="p">{</span>

    <span class="c1">// State of whether more details should be shown</span>
    <span class="kd">var</span> <span class="py">expanded</span> <span class="k">by</span> <span class="nf">remember</span> <span class="p">{</span> <span class="nf">mutableStateOf</span><span class="p">(</span><span class="k">false</span><span class="p">)</span> <span class="p">}</span>

    <span class="nc">Column</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="s">"Some text"</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">expanded</span><span class="p">)</span> <span class="p">{</span>
            <span class="nc">Text</span><span class="p">(</span><span class="s">"More details"</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="nc">Button</span><span class="p">(</span>
                <span class="c1">// The expand details event is processed by the UI that</span>
                <span class="c1">// modifies this composable's internal state.</span>
                <span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span> <span class="n">expanded</span> <span class="p">=</span> <span class="p">!</span><span class="n">expanded</span> <span class="p">}</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">expandText</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">expanded</span><span class="p">)</span> <span class="s">"Collapse"</span> <span class="k">else</span> <span class="s">"Expand"</span>
            <span class="nc">Text</span><span class="p">(</span><span class="s">"$expandText details"</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c1">// The refresh event is processed by the ViewModel that is in charge</span>
        <span class="c1">// of the UI's business logic.</span>
        <span class="nc">Button</span><span class="p">(</span><span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span> <span class="n">viewModel</span><span class="p">.</span><span class="nf">refreshNews</span><span class="p">()</span> <span class="p">})</span> <span class="p">{</span>
            <span class="nc">Text</span><span class="p">(</span><span class="s">"Refresh data"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="user-events-in-recyclerviews"> <a href="#user-events-in-recyclerviews" class="anchor-heading" aria-labelledby="user-events-in-recyclerviews"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User Events in RecyclerViews </h3> <p>Action, bir RecyclerView iteminde veya custom bir Viewde olduğu gibi, UI ağacının daha aşağısında üretilirse, ViewModel yine de kullanıcı eventlerini handle eden olmalıdır.</p> <p>Örneğin, NewsActivity’den gelen tüm haber itemlerinin bir bookmark butonu içerdiğini varsayalım. ViewModel’in bookmark eklenmiş haber iteminin IDsini bilmesi gerekir. Kullanıcı bir haber öğesine bookmark koyduğunda, RecyclerView adapteri, ViewModel’e bağımlılık gerektirecek şekilde ViewModel’den açığa çıkan addBookmark(newsId) methodunu çağırmaz. Bunun yerine ViewModel, eventi handle etmek için implementasyonu içeren NewsItemUiState adlı bir state nesnesini gösterir:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">data class</span> <span class="nc">NewsItemUiState</span><span class="p">(</span>
        <span class="kd">val</span> <span class="py">title</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
        <span class="kd">val</span> <span class="py">body</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
        <span class="kd">val</span> <span class="py">bookmarked</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
        <span class="kd">val</span> <span class="py">publicationDate</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
        <span class="kd">val</span> <span class="py">onBookmark</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span>
<span class="p">)</span>

<span class="kd">class</span> <span class="nc">LatestNewsViewModel</span><span class="p">(</span>
        <span class="k">private</span> <span class="kd">val</span> <span class="py">formatDateUseCase</span><span class="p">:</span> <span class="nc">FormatDateUseCase</span><span class="p">,</span>
        <span class="k">private</span> <span class="kd">val</span> <span class="py">repository</span><span class="p">:</span> <span class="nc">NewsRepository</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">newsListUiItems</span> <span class="p">=</span> <span class="n">repository</span><span class="p">.</span><span class="n">latestNews</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="n">news</span> <span class="p">-&gt;</span>
        <span class="nc">NewsItemUiState</span><span class="p">(</span>
                <span class="n">title</span> <span class="p">=</span> <span class="n">news</span><span class="p">.</span><span class="n">title</span><span class="p">,</span>
                <span class="n">body</span> <span class="p">=</span> <span class="n">news</span><span class="p">.</span><span class="n">body</span><span class="p">,</span>
                <span class="n">bookmarked</span> <span class="p">=</span> <span class="n">news</span><span class="p">.</span><span class="n">bookmarked</span><span class="p">,</span>
                <span class="n">publicationDate</span> <span class="p">=</span> <span class="nf">formatDateUseCase</span><span class="p">(</span><span class="n">news</span><span class="p">.</span><span class="n">publicationDate</span><span class="p">),</span>
                <span class="c1">// Business logic is passed as a lambda function that the</span>
                <span class="c1">// UI calls on click events.</span>
                <span class="n">onBookmark</span> <span class="p">=</span> <span class="p">{</span>
                    <span class="n">repository</span><span class="p">.</span><span class="nf">addBookmark</span><span class="p">(</span><span class="n">news</span><span class="p">.</span><span class="n">id</span><span class="p">)</span>
                <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Bu şekilde, RecyclerView adapteri yalnızca ihtiyaç duyduğu verilerle çalışır: NewsItemUiState nesnelerinin listesi. Adapterin ViewModel’in tamamına erişimi yoktur, bu da ViewModel tarafından açığa çıkarılan fonksiyonaliteyi kötüye kullanma olasılığını azaltır. Yalnızca activity sınıfının ViewModel ile çalışmasına izin verdiğinizde, sorumlulukları ayırmış olursunuz. Bu, viewler veya RecyclerView adapterlari gibi UI’e özgü nesnelerin ViewModel ile doğrudan etkileşime girmemesini sağlar.</p> <p><mark style="background-color: red">Uyarı: ViewModel'i RecyclerView adapterina passlamak kötü bir uygulamadır çünkü adapteri ViewModel sınıfıyla sıkı bir şekilde birleştirir.</mark></p> <p><mark style="background-color: lightblue">Not: Diğer bir yaygın pattern, RecyclerView adapterinin kullanıcı eylemleri( actionlari) için bir callback interfaceine sahip olmasıdır. Bu durumda, activty veya fragment bindingi handle edebilir ve doğrudan callback interfaceinden ViewModel methodlarini çağırabilir.</mark></p> <h3 id="naming-conventions-for-user-event-functions"> <a href="#naming-conventions-for-user-event-functions" class="anchor-heading" aria-labelledby="naming-conventions-for-user-event-functions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Naming conventions for user event functions </h3> <p>Bu kılavuzda, kullanıcı eventlerini handle eden ViewModel fonksiyonlari, gerçekleştirdikleri eyleme göre bir fiille adlandırılır; örneğin: addBookmark(id) veya logIn(username, password).</p> <h3 id="handle-viewmodel-events"> <a href="#handle-viewmodel-events" class="anchor-heading" aria-labelledby="handle-viewmodel-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handle ViewModel Events </h3> <p>ViewModel’den kaynaklanan UI actionlari(ViewModel eventleri), her zaman bir <a href="ui-layer">UI state</a> güncellemesiyle sonuçlanmalıdır. Bu, Tek Yönlü Veri Akışı(UDF) ilkelerine uygundur. Configuration changesden sonra eventleri yeniden üretilebilir hale getirir ve UI actionlarinin kaybolmayacağını garanti eder. İsteğe bağlı olarak, <a href="https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate">saved state modülü</a>nü kullanırsanız, eventleri process ölümünden sonra tekrarlanabilir hale getirebilirsiniz.</p> <p>UI actionlarini UI state’ine maplemek her zaman basit bir işlem değildir, ancak daha basit bir logice yol açar. Örneğin, düşünce süreciniz, UI’in belirli bir ekrana nasıl yönlendirileceğini belirlemekle bitmemelidir. Daha fazla düşünmeniz ve bu kullanıcı akışını UI state’inizde nasıl temsil edeceğinizi düşünmeniz gerekir. Başka bir deyişle: UI’in yapması gereken işlemleri düşünmeyin; bu actionlarinin UI state’ini nasıl etkilediğini düşünün.</p> <p><mark style="background-color:lightblue">Anahtar Nokta: ViewModel eventleri her zaman bir UI state güncellemesiyle sonuçlanmalıdır.</mark></p> <p>Örneğin, kullanıcı oturum açma ekranında oturum açtığında ana ekrana gitme durumunu düşünün. Bunu UI state’inde aşağıdaki gibi modelleyebilirsiniz:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">data class</span> <span class="nc">LoginUiState</span><span class="p">(</span>
        <span class="kd">val</span> <span class="py">isLoading</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
        <span class="kd">val</span> <span class="py">errorMessage</span><span class="p">:</span> <span class="nc">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
        <span class="kd">val</span> <span class="py">isUserLoggedIn</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span>
<span class="p">)</span>
</code></pre></div></div> <p>Bu UI, isUserLoggedIn state’indeki değişikliklere tepki verir ve gerektiğinde doğru hedefe gider:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//views</span>
<span class="kd">class</span> <span class="nc">LoginViewModel</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_uiState</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">(</span><span class="nc">LoginUiState</span><span class="p">())</span>
    <span class="kd">val</span> <span class="py">uiState</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">LoginUiState</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">_uiState</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>
    <span class="cm">/* ... */</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">LoginActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">LoginViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span><span class="p">()</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="cm">/* ... */</span>

        <span class="n">lifecycleScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="nf">repeatOnLifecycle</span><span class="p">(</span><span class="nc">Lifecycle</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">STARTED</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">uiState</span> <span class="p">-&gt;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">uiState</span><span class="p">.</span><span class="n">isUserLoggedIn</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// Navigate to the Home screen.</span>
                    <span class="p">}</span>
                    <span class="o">..</span><span class="p">.</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//compose</span>
<span class="kd">class</span> <span class="nc">LoginViewModel</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="py">uiState</span> <span class="k">by</span> <span class="nf">mutableStateOf</span><span class="p">(</span><span class="nc">LoginUiState</span><span class="p">())</span>
        <span class="k">private</span> <span class="k">set</span>
    <span class="cm">/* ... */</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">LoginScreen</span><span class="p">(</span>
        <span class="n">viewModel</span><span class="p">:</span> <span class="nc">LoginViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">(),</span>
        <span class="n">onUserLogIn</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">currentOnUserLogIn</span> <span class="k">by</span> <span class="nf">rememberUpdatedState</span><span class="p">(</span><span class="n">onUserLogIn</span><span class="p">)</span>

    <span class="c1">// Whenever the uiState changes, check if the user is logged in.</span>
    <span class="nc">LaunchedEffect</span><span class="p">(</span><span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="n">isUserLoggedIn</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">currentOnUserLogIn</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Rest of the UI for the login screen.</span>
<span class="p">}</span>
</code></pre></div></div> <p><mark style="background-color: lightblue">Not: Bu bölümdeki kod örnekleri [coroutinelerin ve bunların yaşam döngüsüne duyarlı bileşenlerle nasıl kullanılacağı](/docs/app-architecture/architecture-components/ui-layer-libraries/lifecycle-aware-components/use-kotlin-coroutines-with-lifecycle-aware-components) nın anlaşılmasını gerektirir.</mark></p> <h3 id="consuming-events-can-trigger-state-updates"> <a href="#consuming-events-can-trigger-state-updates" class="anchor-heading" aria-labelledby="consuming-events-can-trigger-state-updates"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Consuming events can trigger state updates </h3> <p>UI’de belirli ViewModel eventlerinin kullanılması, diğer UI state güncellemelerine neden olabilir. Örneğin, kullanıcıya bir şey olduğunu bildirmek için ekranda geçici mesajlar gösterilirken, mesaj ekranda gösterildiğinde UI’in ViewModel’e başka bir state güncellemesini tetiklemesi için bildirimde bulunması gerekir. Kullanıcı mesajı tükettiğinde (bırakarak veya bir zaman aşımından sonra) meydana gelen event, “user input” olarak ele alınabilir ve bu nedenle, ViewModel bunun farkında olmalıdır. Bu durumda, UI state aşağıdaki gibi modellenebilir:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Models the UI state for the Latest news screen.</span>
<span class="kd">data class</span> <span class="nc">LatestNewsUiState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">news</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">News</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">emptyList</span><span class="p">(),</span>
    <span class="kd">val</span> <span class="py">isLoading</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
    <span class="kd">val</span> <span class="py">userMessage</span><span class="p">:</span> <span class="nc">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
<span class="p">)</span>
</code></pre></div></div> <p>ViewModel, business logic kullanıcıya yeni bir geçici mesaj gösterilmesini gerektirdiğinde UI state’ini aşağıdaki gibi günceller:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Views</span>
<span class="kd">class</span> <span class="nc">LatestNewsViewModel</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">private</span> <span class="kd">val</span> <span class="py">_uiState</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">(</span><span class="nc">LatestNewsUiState</span><span class="p">(</span><span class="n">isLoading</span> <span class="p">=</span> <span class="k">true</span><span class="p">))</span>
  <span class="kd">val</span> <span class="py">uiState</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">LatestNewsUiState</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">_uiState</span>

  <span class="k">fun</span> <span class="nf">refreshNews</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">viewModelScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
      <span class="c1">// If there isn't internet connection, show a new message on the screen.</span>
      <span class="k">if</span> <span class="p">(!</span><span class="nf">internetConnection</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">_uiState</span><span class="p">.</span><span class="nf">update</span> <span class="p">{</span> <span class="n">currentUiState</span> <span class="p">-&gt;</span>
          <span class="n">currentUiState</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span><span class="n">userMessage</span> <span class="p">=</span> <span class="s">"No Internet connection"</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span><span class="nd">@launch</span>
      <span class="p">}</span>

      <span class="c1">// Do something else.</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">fun</span> <span class="nf">userMessageShown</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">_uiState</span><span class="p">.</span><span class="nf">update</span> <span class="p">{</span> <span class="n">currentUiState</span> <span class="p">-&gt;</span>
      <span class="n">currentUiState</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span><span class="n">userMessage</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//compose</span>
<span class="kd">class</span> <span class="nc">LatestNewsViewModel</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="py">uiState</span> <span class="k">by</span> <span class="nf">mutableStateOf</span><span class="p">(</span><span class="nc">LatestNewsUiState</span><span class="p">())</span>
    <span class="k">private</span> <span class="k">set</span>

  <span class="k">fun</span> <span class="nf">refreshNews</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">viewModelScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
      <span class="c1">// If there isn't internet connection, show a new message on the screen.</span>
      <span class="k">if</span> <span class="p">(!</span><span class="nf">internetConnection</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">uiState</span> <span class="p">=</span> <span class="n">uiState</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span><span class="n">userMessage</span> <span class="p">=</span> <span class="s">"No Internet connection"</span><span class="p">)</span>
        <span class="k">return</span><span class="nd">@launch</span>
      <span class="p">}</span>

      <span class="c1">// Do something else.</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">fun</span> <span class="nf">userMessageShown</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">uiState</span> <span class="p">=</span> <span class="n">uiState</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span><span class="n">userMessage</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>ViewModel’in, UI’in mesajı ekranda nasıl gösterdiğini bilmesi gerekmez; sadece gösterilmesi gereken bir kullanıcı mesajı olduğunu bilir. Geçici mesaj gösterildikten sonra, UI’in bunu ViewModel’e bildirmesi gerekir ve başka bir UI state güncellemesinin userMessage propertysini temizlemesine neden olur:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//views</span>
<span class="kd">class</span> <span class="nc">LatestNewsActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">LatestNewsViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span><span class="p">()</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
    <span class="cm">/* ... */</span>

    <span class="n">lifecycleScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
      <span class="nf">repeatOnLifecycle</span><span class="p">(</span><span class="nc">Lifecycle</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">STARTED</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">uiState</span> <span class="p">-&gt;</span>
          <span class="n">uiState</span><span class="p">.</span><span class="n">userMessage</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span>
            <span class="c1">// TODO: Show Snackbar with userMessage.</span>

            <span class="c1">// Once the message is displayed and</span>
            <span class="c1">// dismissed, notify the ViewModel.</span>
            <span class="n">viewModel</span><span class="p">.</span><span class="nf">userMessageShown</span><span class="p">()</span>
          <span class="p">}</span>
          <span class="o">..</span><span class="p">.</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//compose</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">LatestNewsScreen</span><span class="p">(</span>
        <span class="n">snackbarHostState</span><span class="p">:</span> <span class="nc">SnackbarHostState</span><span class="p">,</span>
        <span class="n">viewModel</span><span class="p">:</span> <span class="nc">LatestNewsViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">(),</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Rest of the UI content.</span>

  <span class="c1">// If there are user messages to show on the screen,</span>
  <span class="c1">// show it and notify the ViewModel.</span>
  <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="n">userMessage</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span> <span class="n">userMessage</span> <span class="p">-&gt;</span>
    <span class="nc">LaunchedEffect</span><span class="p">(</span><span class="n">userMessage</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">snackbarHostState</span><span class="p">.</span><span class="nf">showSnackbar</span><span class="p">(</span><span class="n">userMessage</span><span class="p">)</span>
      <span class="c1">// Once the message is displayed and dismissed, notify the ViewModel.</span>
      <span class="n">viewModel</span><span class="p">.</span><span class="nf">userMessageShown</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Mesaj geçici olsa da, UI state, zamanın her noktasında ekranda görüntülenenlerin aslına sadık bir temsilidir. Kullanıcı mesajı görüntülenir veya görüntülenmez.</p> <p><mark style="background-color: lightblue">Not: Ekranda gösterilecek kullanıcı mesajlarının listesini içeren daha gelişmiş bir kullanım örneği için [Jetsnack Compose](https://github.com/android/compose-samples/blob/main/Jetsnack/app/src/main/java/com/example/jetsnack/model/SnackbarManager.kt) örneğine bakın. </mark></p> <h3 id="navigation-events"> <a href="#navigation-events" class="anchor-heading" aria-labelledby="navigation-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Navigation Events </h3> <p><a href="#consuming-events-can-trigger-state-updates">Consuming events can trigger state updates</a> bölümü, kullanıcı mesajlarını ekranda görüntülemek için UI state’ini nasıl kullandığınızı ayrıntılarıyla açıklar. Navigasyon eventleri, bir Android uygulamasında da yaygın olarak görülen bir event türüdür. Event, kullanıcı bir butona dokunduğu için UI’de tetiklenirse, UI, navigation controller çağırarak veya eventi çağırana uygun şekilde composable olarak göstererek bununla ilgilenir.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//views</span>
<span class="kd">class</span> <span class="nc">LoginActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">ActivityLoginBinding</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">LoginViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span><span class="p">()</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
    <span class="cm">/* ... */</span>

    <span class="n">binding</span><span class="p">.</span><span class="n">helpButton</span><span class="p">.</span><span class="nf">setOnClickListener</span> <span class="p">{</span>
      <span class="n">navController</span><span class="p">.</span><span class="nf">navigate</span><span class="p">(</span><span class="o">..</span><span class="p">.)</span> <span class="c1">// Open help screen</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//compose</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">LoginScreen</span><span class="p">(</span>
        <span class="n">onHelp</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span> <span class="c1">// Caller navigates to the right screen</span>
        <span class="n">viewModel</span><span class="p">:</span> <span class="nc">LoginViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">()</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Rest of the UI</span>

  <span class="nc">Button</span><span class="p">(</span><span class="n">onClick</span> <span class="p">=</span> <span class="n">onHelp</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="s">"Get help"</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Data input, navigateden önce bazı business logic doğrulaması gerektiriyorsa, ViewModel’in bu durumu UI’a göstermesi gerekir. Kullanıcı arayüzü bu state değişikliğine tepki verir ve buna göre navigate eder. <a href="#handle-viewmodel-events">Handle ViewModel events section</a> bölümü bu kullanım durumunu kapsar. İşte benzer bir kod:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//views</span>
<span class="kd">class</span> <span class="nc">LoginActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">LoginViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span><span class="p">()</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
    <span class="cm">/* ... */</span>

    <span class="n">lifecycleScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
      <span class="nf">repeatOnLifecycle</span><span class="p">(</span><span class="nc">Lifecycle</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">STARTED</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">uiState</span> <span class="p">-&gt;</span>
          <span class="k">if</span> <span class="p">(</span><span class="n">uiState</span><span class="p">.</span><span class="n">isUserLoggedIn</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Navigate to the Home screen.</span>
          <span class="p">}</span>
          <span class="o">..</span><span class="p">.</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//compose</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">LoginScreen</span><span class="p">(</span>
        <span class="n">onUserLogIn</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span> <span class="c1">// Caller navigates to the right screen</span>
        <span class="n">viewModel</span><span class="p">:</span> <span class="nc">LoginViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">()</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="nc">Button</span><span class="p">(</span>
          <span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span>
            <span class="c1">// ViewModel validation is triggered</span>
            <span class="n">viewModel</span><span class="p">.</span><span class="nf">login</span><span class="p">()</span>
          <span class="p">}</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="s">"Log in"</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="c1">// Rest of the UI</span>

  <span class="kd">val</span> <span class="py">lifecycle</span> <span class="p">=</span> <span class="nc">LocalLifecycleOwner</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">lifecycle</span>
  <span class="kd">val</span> <span class="py">currentOnUserLogIn</span> <span class="k">by</span> <span class="nf">rememberUpdatedState</span><span class="p">(</span><span class="n">onUserLogIn</span><span class="p">)</span>
  <span class="nc">LaunchedEffect</span><span class="p">(</span><span class="n">viewModel</span><span class="p">,</span> <span class="n">lifecycle</span><span class="p">)</span>  <span class="p">{</span>
    <span class="c1">// Whenever the uiState changes, check if the user is logged in and</span>
    <span class="c1">// call the `onUserLogin` event when `lifecycle` is at least STARTED</span>
    <span class="nf">snapshotFlow</span> <span class="p">{</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span> <span class="p">}</span>
            <span class="p">.</span><span class="nf">filter</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">isUserLoggedIn</span> <span class="p">}</span>
            <span class="p">.</span><span class="nf">flowWithLifecycle</span><span class="p">(</span><span class="n">lifecycle</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">collect</span> <span class="p">{</span>
              <span class="nf">currentOnUserLogIn</span><span class="p">()</span>
            <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Yukarıdaki örnekte, current destination olan Login backstackde tutulmayacağından uygulama beklendiği gibi çalışır. Kullanıcılar geri basarlarsa geri dönemezler. Ancak bunun olabileceği durumlarda, çözüm ek logic gerektirecektir.</p> <h3 id="navigation-events-when-the-destination-is-kept-in-the-back-stack"> <a href="#navigation-events-when-the-destination-is-kept-in-the-back-stack" class="anchor-heading" aria-labelledby="navigation-events-when-the-destination-is-kept-in-the-back-stack"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Navigation events when the destination is kept in the back stack </h3> <p>Bir ViewModel, A ekranından B ekranına bir navigation event üreten bir state belirlediğinde ve A ekranı navigation backstack’nde tutulduğunda, otomatik olarak B’ye ilerlemeye devam etmemek için ek logice ihtiyacınız olabilir. Bunu implement etmek için, UI’in diğer ekrana gitmeyi düşünüp düşünmemesi gerektiğini gösteren ek bir state’e sahip olunması gerekir.Normalde, bu state UI’de tutulur çünkü Navigation logic, ViewModel ile değil, UI ile ilgilidir. Bunu göstermek için, aşağıdaki kullanım örneğini ele alalım.</p> <p>Diyelim ki uygulamanızın kayıt akışındasınız. Doğum tarihi doğrulama ekranında, kullanıcı bir tarih girdiğinde, kullanıcı “Continue” butonuna dokunduğunda tarih ViewModel tarafından doğrulanır. ViewModel, doğrulama logic’ini data katmanına devreder. Tarih geçerliyse, kullanıcı bir sonraki ekrana geçer. Ek bir özellik olarak, kullanıcılar bazı verileri değiştirmek istediklerinde farklı kayıt ekranları arasında gidip gelebilirler. Bu nedenle, kayıt akışındaki tüm destinationlar aynı backstackde tutulur. Bu gereksinimler göz önüne alındığında, bu ekranı aşağıdaki gibi uygulayabilirsiniz:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//views</span>
<span class="c1">// Key that identifies the `validationInProgress` state in the Bundle</span>
<span class="k">private</span> <span class="k">const</span> <span class="kd">val</span> <span class="py">DOB_VALIDATION_KEY</span> <span class="p">=</span> <span class="s">"dobValidationKey"</span>

<span class="kd">class</span> <span class="nc">DobValidationFragment</span> <span class="p">:</span> <span class="nc">Fragment</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">private</span> <span class="kd">var</span> <span class="py">validationInProgress</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">DobValidationViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span><span class="p">()</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onViewCreated</span><span class="p">(</span><span class="n">view</span><span class="p">:</span> <span class="nc">View</span><span class="p">,</span> <span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">.</span><span class="nf">onViewCreated</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">savedInstanceState</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">binding</span> <span class="p">=</span> <span class="c1">// ...</span>
            <span class="n">validationInProgress</span> <span class="p">=</span> <span class="n">savedInstanceState</span><span class="o">?.</span><span class="nf">getBoolean</span><span class="p">(</span><span class="nc">DOB_VALIDATION_KEY</span><span class="p">)</span> <span class="o">?:</span> <span class="k">false</span>

    <span class="n">binding</span><span class="p">.</span><span class="n">continueButton</span><span class="p">.</span><span class="nf">setOnClickListener</span> <span class="p">{</span>
      <span class="n">viewModel</span><span class="p">.</span><span class="nf">validateDob</span><span class="p">()</span>
      <span class="n">validationInProgress</span> <span class="p">=</span> <span class="k">true</span>
    <span class="p">}</span>

    <span class="n">viewLifecycleOwner</span><span class="p">.</span><span class="n">lifecycleScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
      <span class="nf">launch</span> <span class="p">{</span>
        <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span>
                <span class="p">.</span><span class="nf">flowWithLifecycle</span><span class="p">(</span><span class="n">viewLifecycleOwner</span><span class="p">.</span><span class="n">lifecycle</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">uiState</span> <span class="p">-&gt;</span>
                  <span class="c1">// Update other parts of the UI ...</span>

                  <span class="c1">// If the input is valid and the user wants</span>
                  <span class="c1">// to navigate, navigate to the next screen</span>
                  <span class="c1">// and reset `validationInProgress` flag</span>
                  <span class="k">if</span> <span class="p">(</span><span class="n">uiState</span><span class="p">.</span><span class="n">isDobValid</span> <span class="p">&amp;&amp;</span> <span class="n">validationInProgress</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">validationInProgress</span> <span class="p">=</span> <span class="k">false</span>
                    <span class="n">navController</span><span class="p">.</span><span class="nf">navigate</span><span class="p">(</span><span class="o">..</span><span class="p">.)</span> <span class="c1">// Navigate to next screen</span>
                  <span class="p">}</span>
                <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">binding</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onSaveInstanceState</span><span class="p">(</span><span class="n">outState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">.</span><span class="nf">onSaveInstanceState</span><span class="p">(</span><span class="n">outState</span><span class="p">)</span>
    <span class="n">outState</span><span class="p">.</span><span class="nf">putBoolean</span><span class="p">(</span><span class="nc">DOB_VALIDATION_KEY</span><span class="p">,</span> <span class="n">validationInProgress</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//compose</span>
<span class="kd">class</span> <span class="nc">DobValidationViewModel</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="py">uiState</span> <span class="k">by</span> <span class="nf">mutableStateOf</span><span class="p">(</span><span class="nc">DobValidationUiState</span><span class="p">())</span>
    <span class="k">private</span> <span class="k">set</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">DobValidationScreen</span><span class="p">(</span>
        <span class="n">onNavigateToNextScreen</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span> <span class="c1">// Caller navigates to the right screen</span>
        <span class="n">viewModel</span><span class="p">:</span> <span class="nc">DobValidationViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">()</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// TextField that updates the ViewModel when a date of birth is selected</span>

  <span class="kd">var</span> <span class="py">validationInProgress</span> <span class="k">by</span> <span class="nf">rememberSaveable</span> <span class="p">{</span> <span class="nf">mutableStateOf</span><span class="p">(</span><span class="k">false</span><span class="p">)</span> <span class="p">}</span>

  <span class="nc">Button</span><span class="p">(</span>
          <span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="p">.</span><span class="nf">validateInput</span><span class="p">()</span>
            <span class="n">validationInProgress</span> <span class="p">=</span> <span class="k">true</span>
          <span class="p">}</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="s">"Continue"</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="c1">// Rest of the UI</span>

  <span class="cm">/*
   * The following code implements the requirement of advancing automatically
   * to the next screen when a valid date of birth has been introduced
   * and the user wanted to continue with the registration process.
   */</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">validationInProgress</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">lifecycle</span> <span class="p">=</span> <span class="nc">LocalLifecycleOwner</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">lifecycle</span>
    <span class="kd">val</span> <span class="py">currentNavigateToNextScreen</span> <span class="k">by</span> <span class="nf">rememberUpdatedState</span><span class="p">(</span><span class="n">onNavigateToNextScreen</span><span class="p">)</span>
    <span class="nc">LaunchedEffect</span><span class="p">(</span><span class="n">viewModel</span><span class="p">,</span> <span class="n">lifecycle</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// If the date of birth is valid and the validation is in progress,</span>
      <span class="c1">// navigate to the next screen when `lifecycle` is at least STARTED,</span>
      <span class="c1">// which is the default Lifecycle.State for the `flowWithLifecycle` operator.</span>
      <span class="nf">snapshotFlow</span> <span class="p">{</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">uiState</span> <span class="p">}</span>
              <span class="p">.</span><span class="nf">filter</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">isDobValid</span> <span class="p">}</span>
              <span class="p">.</span><span class="nf">flowWithLifecycle</span><span class="p">(</span><span class="n">lifecycle</span><span class="p">)</span>
              <span class="p">.</span><span class="nf">collect</span> <span class="p">{</span>
                <span class="n">validationInProgress</span> <span class="p">=</span> <span class="k">false</span>
                <span class="nf">currentNavigateToNextScreen</span><span class="p">()</span>
              <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Doğum tarihi doğrulama, ViewModel’in sorumlu olduğu business logictir. ViewModel çoğu zaman bu logic’i data katmanına devreder. Kullanıcıyı bir sonraki ekrana yönlendirme mantığı, UI logictir çünkü bu gereksinimler, UI yapılandırmasına bağlı olarak değişebilir. Örneğin, aynı anda birden çok kayıt adımı gösteriyorsanız, bir tablette otomatik olarak başka bir ekrana ilerlemek istemeyebilirsiniz. Yukarıdaki koddaki validationInProgress değişkeni bu işlevi uygular ve UI’in doğum tarihi geçerli olduğunda ve kullanıcı aşağıdaki kayıt adımına devam etmek istediğinde otomatik olarak navigate edilip edilmeyeceğini belirler.</p> <h3 id="other-use-cases"> <a href="#other-use-cases" class="anchor-heading" aria-labelledby="other-use-cases"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Other Use Cases </h3> <p>UI event usecaseinizin UI state güncellemeleriyle çözülemeyeceğini düşünüyorsanız, uygulamanızda veri akışını yeniden gözden geçirmeniz gerekebilir. Aşağıdaki ilkeleri göz önünde bulundurun:</p> <ul> <li>Her sınıf sorumlu olduğu şeyi yapmalı, daha fazlasını değil. Kullanıcı arabirimi, navigation calls, click events ve izin istekleri alma gibi ekrana özgü davranış mantığından sorumludur. ViewModel, iş mantığını içerir ve sonuçları hiyerarşinin alt katmanlarından UI state’ine dönüştürür.</li> <li>Eventin nereden kaynaklandığını düşünün. Bu kılavuzun başında sunulan decision tree’yi takip edin ve her sınıfın sorumlu olduğu konuyu halletmesini sağlayın. Örneğin, event kullanıcı arayüzünden geliyorsa ve bir navigate ile olayıyla sonuçlanıyorsa, o eventin kullanıcı arayüzünde handle edilmesi gerekir. Bazı logicler ViewModel’e devredilebilir, ancak eventin handle edilmesi tamamen ViewModel’e devredilemez.</li> <li>Birden çok consumer varsa ve activitynin birden çok kez consume edilmesinden endişe ediyorsanız uygulama mimarinizi yeniden gözden geçirmeniz gerekebilir. Birden fazla concurrent consumure sahip olmak, tam olarak bir kez teslim edilen sözleşmenin garanti edilmesinin son derece zor hale gelmesine neden olur, bu nedenle karmaşıklık ve subtle behavior miktarı patlar. Bu sorunu yaşıyorsanız, bu endişeleri kullanıcı arabirimi ağacınızda yukarıya taşımayı düşünün; hiyerarşide daha üstte yer alan farklı bir entitye ihtiyacınız olabilir.</li> <li>State’in ne zaman tüketilmesi gerektiğini bir düşünün. Belirli durumlarda, uygulama arka plandayken (örneğin, bir Toast gösterirken) state’i tüketmeye devam etmek istemeyebilirsiniz. Bu gibi durumlarda, kullanıcı arabirimi ön planda olduğunda state’i kullanmayı düşünün.</li> </ul> <p><mark style="background-color: lightblue">Not: Bazı uygulamalarda, ViewModel eventlerinin [Kotlin Channels](https://kotlinlang.org/docs/channels.html) veya diğer reactive streams kullanılarak kullanıcı arayüzüne maruz kaldığını görmüş olabilirsiniz. Producer (ViewModel) consumeri (UI—Compose veya Views) geride bıraktığında, bu çözümler bu eventlerin teslimini ve işlenmesini garanti etmez. Bu, geliştirici için gelecekte sorunlara neden olabilir ve aynı zamanda çoğu uygulama için kabul edilemez bir kullanıcı deneyimidir çünkü bu, uygulamayı tutarsız bir durumda bırakabilir, hatalara neden olabilir veya kullanıcı kritik bilgileri kaçırabilir. Bu durumlardan birindeyseniz, o tek seferlik ViewModel eventinin kullanıcı arayüzünüz için gerçekte ne anlama geldiğini tekrar düşünün. Bunları hemen handle edin ve UI state’ine indirin. UI state’i, UI'yi belirli bir zamanda daha iyi temsil eder, size daha fazla teslimat ve işleme garantisi verir, test edilmesi genellikle daha kolaydır ve uygulamanızın geri kalanıyla tutarlı bir şekilde entegre olur. Bazı kod örnekleriyle yukarıda bahsedilen API'leri neden kullanmamanız gerektiği hakkında daha fazla bilgi edinmek için [ViewModel: One-off event antipatterns](https://medium.com/androiddevelopers/viewmodel-one-off-event-antipatterns-16a1da869b95) blog gönderisini okuyun. </mark></p> <h3 id="samples"> <a href="#samples" class="anchor-heading" aria-labelledby="samples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a href="https://developer.android.com/topic/architecture/ui-layer/events#samples">Samples</a> </h3> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
